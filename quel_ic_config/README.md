# quel_ic_config

## 概要 
quel_ic_configは、既存のキュエル社製制御装置モデルにおけるadi_api_mod および qubelsi 相当の機能の高信頼化と、
新制御装置モデルへの容易な適合を意図した、新しいホスト側ソフトウェアである。
複数の制御装置を統合するためのシステムソフトウェア開発の障害を解消し、また、将来の拡張性を確保することも開発目的である。
とりあえず使ってみる場合には、[こちらのドキュメント](./docs/GETTING_STARTED.md)を参照いただきたい。
[scriptsディレクトリ内](./scripts)のサンプルスクリプトの使用法については、[こちらのドキュメント](./docs/HOW_TO_USE_EXAMPLES.md)を参照いただきたい。
開発者向けの細かい概念説明については、[こちらのドキュメント](./docs/DEVELOPMENT_NOTES.md)を参照いただきたい。

- QuEL-1のリンク確立、設定状態の取得、簡単な動作試験をするためのコマンド群を提供。
    - `quel1_linkup`:  リンク確立手順を実施する。
    - `quel1_linkstatus`:  現在のリンク状態を表示する。
    - `quel1_parallel_linkup`: 設定ファイルに記述した全ての装置に対し、同時にリンク確立手順を実施する。
    - `quel1_dump_port_config`:  各ポートごとの設定状況を表示する。
    - `quel1_firmware_version`: ファームウェアバージョンを表示する。
    - `quel1se_tempctrl_state`: QuEL-1 SE の恒温制御の稼働状態を表示する。
    - `quel1se_tempctrl_reset`: QuEL-1 SE の恒温制御を再始動する。環境温度が大きく変動した場合に温度目標値をリセットするのに使う。
    - `e7awg_dump`: AWGの内部レジスタをダンプする。(feedback版のファームウェアには未対応。）
    - `quel1_phase_log`: QuEL-1 の位相安定性を測定するスクリプト。QuEL-1 SEには未対応。試験的に提供。使い勝手を改善する予定。
- QuEL-1の内部リソースを概念として組織化し、各コンポーネントの設定を容易かつ意図通りに行えるAPIを提供。
    - 次に示す階層構造にしたがって整理されており、全てのキュエル社製の制御装置を同じように扱うことができる。
      - 各コンポーネントのハードウェアを抽象化する層 (HAL)
      - 各コンポーネントをQuEL-1の機能の文脈で抽象化し直した層 (CSS)
      - 波形発生及び取得の機能をQuEL-1の機能の文脈で抽象化した層 (WSS)
      - 全てのキュエル社製制御装置モデルで共通化したAPIを提供する層 (Box) 
      - (複数の制御装置をひとつの量子計算機制御システムとして見せる層 (開発中)）
    - Boxオブジェクトを quel_ic_config.Quel1Box.create() を介して作成することで、ハードウェアの詳細に関する面倒なポイントを分かりやすく安全に使えるAPIを提供。
      - 構成の異なるポートを統一的に設定できる柔軟なAPIで、厳格な静的・動的チェックをする内部メカニズムをラッピングして提供。
      - 複数の用途で共有されているリソース設定で生じがちな矛盾を検出して、意図しない動作を未然に防ぐAPI設計。

## 対応制御装置モデル
本ライブラリがサポートしている制御装置モデルの一覧を示す。
ライブラリの初期化時に対象制御装置のモデル名を指定する必要があるので、その識別子も合わせて説明する。

### QuEL-1 (Type-A 及び Type-B)
キュエル株式会社が製造した2022年度から2023年度にかけて製造・販売した制御装置で、 以下の示すとおり、3種類のバリエーションがある。
- 最初期型: 2022年の10月以前に納品した機体。ポート配置がQuBE-RIKENと同じなので、本ライブラリでは　QuBE-RIKEN Type-A と同一視する。 
- 標準型: 2023年2月以降に納品した機体のほとんどすべて。２つの構成 Type-A と Type-B が存在。
- 7GHzモデル： 制御信号の出力帯域が標準型と異なるカスタムタイプ。ソフトウェア的には標準型と等価なので、殆どの場合、QuEL-1 Type-A と同一視できる。

### QuEL-1 NEC
4つの独立した量子ビットを制御するためのQuEL-1のカスタムモデル。

### QuEL-1 SE 
QuEL-1 のハードウェアを大幅にリファインした2023年度末モデル。
恒温系ハードウェアの全面的見直し、周波数コンバータのモジュール化、設定系ファームウェアの全面改修と機能向上など、性能と構成の柔軟性の両方を大幅に向上させている。

- RIKEN 8GHzモデル: QuEL-1 SEのローンチモデルで、理研の5GHz帯量子ビットを制御するために、2-8GHzのRF入出力を持つ。
- FUJITSU 11GHzモデル: QuEL-1 Type-A/B 標準型と機能的に互換。

### QuBE (Type-A 及び Type-B)
QuEL-1 の元になった制御装置で、最初期型の QuBE-OU と、その改良型の QuBE-RIKEN とがある。
前者にはモニタ系が実装されていない。後者は　QuEL-1 と同様にモニタ系を内蔵している。
これらのモデルは、キュエル株式会社の納品物ではないが、本ライブラリの動作をサポートする。
後述するように、QuEL-1 とは大幅にポートの並び異なるので注意が必要である。
